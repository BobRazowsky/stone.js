!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Stone=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(){if(g){var a=document.getElementsByTagName("*"),b=null,c=null,d=0,e=0;for(d=0;d<a.length;d++)if(a[d].hasAttribute("stonejs")){for(a[d].hasAttribute("stonejs-orig-string")||a[d].setAttribute("stonejs-orig-string",a[d].innerHTML),b={},c=a[d].attributes,e=0;e<c.length;e++)0===c[e].name.indexOf("stonejs-param-")&&(b[c[e].name.substr(14)]=c[e].value);a[d].innerHTML=f(a[d].getAttribute("stonejs-orig-string"),b)}}}function e(a){g=Boolean(a),d()}var f=a("./gettext.js").gettext,g=!1;b.exports={enableDomScan:e,updateDomTranslation:d}},{"./gettext.js":2}],2:[function(a,b,c){"use strict";function d(a,b){var c=a;if(k&&j[k]&&j[k].messages[a]&&j[k].messages[a].length>0&&""!==j[k].messages[a][0]&&(c=j[k].messages[a][0]),b)for(var d in b)c=c.replace(new RegExp("{"+d+"}","g"),b[d]);return c}function e(a,b){this.toString=d.bind(this,a,b);for(var c=Object.getOwnPropertyNames(String.prototype),e=0;e<c.length;e++)"toString"!=c[e]&&("function"==typeof String.prototype[c[e]]?this[c[e]]=function(){var a=this.self.toString();return a[this.prop].apply(a,arguments)}.bind({self:this,prop:c[e]}):Object.defineProperty(this,c[e],{get:function(){var a=this.self.toString();return a[this.prop]}.bind({self:this,prop:c[e]}),enumerable:!1,configurable:!1}))}function f(a,b){return new e(a,b)}function g(a){for(var b in a)j[b]=a[b]}function h(){return k}function i(a){k=a}var j=(a("./helpers.js"),{}),k=null;b.exports={LazyString:e,gettext:d,lazyGettext:f,addCatalogs:g,getLocale:h,setLocale:i}},{"./helpers.js":3}],3:[function(a,b,c){"use strict";function d(a,b){b=b||{};var c=null;try{c=new Event(a)}catch(d){c=document.createEvent("Event"),c.initEvent(a,!0,!1)}for(var e in b)c[e]=b[e];document.dispatchEvent(c)}function e(a){if(!a)return["en"];for(var b,c,d=[],e=a.toLowerCase().replace(/-/g,"_").split(","),f=0;f<e.length;f++)c={lang:null,lect:null,q:1},e[f].indexOf(";")>-1?(b=e[f].split(";"),2==b.length&&b[1].match(/^q=(1|0\.[0-9]+)$/)&&(c.q=parseFloat(b[1].split("=")[1])),b=b[0]||""):b=e[f],b.indexOf("_")>-1?(b=b.split("_"),2==b.length?2==b[0].length&&(c.lang=b[0],2==b[1].length&&(c.lect=b[1])):2==b[0].length&&(c=b[0])):2==b.length&&(c.lang=b),c.lang&&d.push(c);if(0===d.length)return["en"];d=d.sort(function(a,b){return b.q-a.q});var g=[];for(f=0;f<d.length;f++)b=d[f].lang,d[f].lect&&(b+="_",b+=d[f].lect.toUpperCase()),g.push(b);return g}b.exports={sendEvent:d,extractLanguages:e}},{}],4:[function(a,b,c){"use strict";function d(){var a=navigator.language||navigator.userLanguage||navigator.systemLanguage||navigator.browserLanguage;return g.extractLanguages(a)[0]}function e(a){h.setLocale(a),i.updateDomTranslation(),g.sendEvent("stonejs-locale-changed")}function f(a){h.addCatalogs(a.catalog)}var g=a("./helpers.js"),h=a("./gettext.js"),i=a("./dom.js");document.addEventListener("stonejs-autoload-catalogs",f,!0),b.exports={LazyString:h.LazyString,gettext:h.gettext,lazyGettext:h.lazyGettext,addCatalogs:h.addCatalogs,getLocale:h.getLocale,setLocale:e,guessUserLanguage:d,enableDomScan:i.enableDomScan,updateDomTranslation:i.updateDomTranslation}},{"./dom.js":1,"./gettext.js":2,"./helpers.js":3}]},{},[4])(4)});